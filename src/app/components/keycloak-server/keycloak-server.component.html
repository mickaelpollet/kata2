<div class="user-card">
    <h2>Keycloak Server Informations</h2>

    <table class="user-table">
        <tr>
            <td class="table-column-title"><strong>Issuer</strong></td>
            <td class="table-column-content">{{ this.keycloakServer.iss }}</td>
            <td class="table-column-button">
                <button type="button" class="btn btn-secondary btn-sm" (click)="copyToClipboard(keycloakServer.iss)">
                <i class="bi bi-clipboard"></i>
                </button>
            </td>
        </tr>
        <tr>
            <td class="table-column-title"><strong>Client</strong></td>
            <td class="table-column-content">{{ this.keycloakServer.azp }}</td>
            <td class="table-column-button">
                <button type="button" class="btn btn-secondary btn-sm" (click)="copyToClipboard(keycloakServer.azp)">
                <i class="bi bi-clipboard"></i>
                </button>
            </td>
        </tr>
        <tr>
            <td class="table-column-title"><strong>Scope</strong></td>
            <td class="table-column-content">{{ keycloakServer.scope }}</td>
            <td class="table-column-button">
            <button type="button" class="btn btn-secondary btn-sm" (click)="copyToClipboard(keycloakServer.scope)">
                <i class="bi bi-clipboard"></i>
            </button>
            </td>
        </tr>
    </table>

    <hr>

    <table class="user-table">
        <tr>
            <td class="table-column-title"><strong>Forged Time</strong></td>
            <td class="table-column-content">{{ this.keycloakServer.iat | timestampToDate }} <small>({{ this.keycloakServer.iat }})</small></td>
            <td class="table-column-button">
                <button type="button" class="btn btn-secondary btn-sm" (click)="copyToClipboard(keycloakServer.iat)">
                <i class="bi bi-clipboard"></i>
                </button>
            </td>
        </tr>
        <tr>
            <td class="table-column-title"><strong>Expiration Time</strong></td>
            <td class="table-column-content">{{ this.keycloakServer.exp | timestampToDate }} <small>({{ this.keycloakServer.exp }})</small></td>
            <td class="table-column-button">
                <button type="button" class="btn btn-secondary btn-sm" (click)="copyToClipboard(keycloakServer.exp)">
                <i class="bi bi-clipboard"></i>
                </button>
            </td>
        </tr>
        <tr>
            <td class="table-column-token" [colSpan]="3">
                <!-- <strong>Token Expiration :</strong></td> -->
                <div class="countdown-timer" *ngIf="remainingTime > 0">
                    <span class="badge" [ngClass]="getBadgeClass()">
                        Token Time Remaining: {{ formatRemainingTime(remainingTime) }}
                    </span>
                </div>
            </td>
        </tr>
    </table>

    <hr>

    <table class="user-table">
        <tr>
            <td class="table-column-title"><strong>sid</strong></td>
            <td class="table-column-content">{{ this.keycloakServer.sid }}</td>
            <td class="table-column-button">
                <button type="button" class="btn btn-secondary btn-sm" (click)="copyToClipboard(keycloakServer.sid)">
                <i class="bi bi-clipboard"></i>
                </button>
            </td>
        </tr>
        <tr>
            <td class="table-column-title"><strong>Access Context Class Reference (acr)</strong></td>
            <td class="table-column-content">{{ this.keycloakServer.acr }}</td>
            <td class="table-column-button">
                <button type="button" class="btn btn-secondary btn-sm" (click)="copyToClipboard(keycloakServer.acr)">
                <i class="bi bi-clipboard"></i>
                </button>
            </td>
        </tr>
        <tr>
            <td class="table-column-title"><strong>Allowed Origins</strong></td>
            <td class="table-column-content">
                <div class="badges-container">
                <span 
                    *ngFor="let currentOrigin of keycloakServer.allowedOrigins"
                    class="badge"
                    (click)="copyToClipboard(currentOrigin)">
                    {{ currentOrigin }}
                </span>
                </div>
            </td>
            <td class="table-column-button">
                <button type="button" class="btn btn-secondary btn-sm" (click)="copyToClipboard(keycloakServer.allowedOrigins)">
                <i class="bi bi-clipboard"></i>
                </button>
            </td>
        </tr>
    </table>
</div>